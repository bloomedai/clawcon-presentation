## Version Control

- Conventional commits (for PR names, too) with gitmoji: `feat‚ú® fixüêõ docsüìù styleüíÑ refactor‚ôªÔ∏è test‚úÖ choreüîß`
- Short oneline commit messages, atomic commits
- Never add Co-Authored-By, "Generated by Claude", or any AI attribution to commit messages or PRs
- Use 0-ver in all projects: https://0ver.org/
- Always use gh cli with github urls

## Alfred (remote server)

- SSH alias: `alfred` (just `ssh alfred`)
- macOS machine at `/Users/alfred/`, default shell: fish (`/usr/local/bin/fish`)
- **SSH gotcha**: `ssh alfred "command"` uses non-interactive non-login shell ‚Äî minimal PATH. Use `/usr/local/bin/fish -l -c 'command'` for full PATH.
- Homebrew: `/usr/local/bin/brew`, Pixi: `~/.pixi/bin/pixi`
- Dotfiles synced via rsync (no GitHub SSH key on alfred): fish config, ghostty config, update-all scripts
- Nightly cron at 3:00 AM: `update-all --quiet` (logs in `~/.local/state/`)

## Working Process (TDD)

1. **No implementation without acceptance criteria.** Before writing any code, ask the user to define the expected end state and how to verify it (test cases, assertions, CLI output, etc.).
2. **Tests first, and they must fail.** Write or update tests before implementation code. Run them and confirm they fail (red). If they pass before implementation, the tests are wrong ‚Äî fix them.
3. **Implement until green.** Write the minimal code to make the failing tests pass.
4. **Verify before declaring done.** Run the full relevant test suite and linter. Show results before marking work complete.
5. **User approves the "what", agent executes the "how".** Always use plan mode for non-trivial changes. The plan must include verification steps.
6. **No mocks.** Prefer dependency injection and functional style (pure functions, pass collaborators as arguments) to make code testable without mocks. Use fakes/stubs only when unavoidable (e.g. network, filesystem).
7. **Test behavior, not implementation.** Don't test default values, constructors, getters/setters, or other trivial code. Tests should verify meaningful business logic and edge cases.
8. **Test names describe the scenario.** E.g. `test_expired_token_returns_401` not `test_validate_token`.
9. **One concept per test.** Keep assertions focused so failures pinpoint the problem.
10. **Prefer integration tests over unit tests when cheap.** Especially for glue code ‚Äî test the real thing instead of mocking everything around it.
